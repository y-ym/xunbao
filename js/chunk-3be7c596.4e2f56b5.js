(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be7c596"],{"2f14":function(e,t,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}o.d(t,"a",(function(){return c}));var n=o("d399"),i=function(){function e(){a(this,e)}return r(e,[{key:"validForm",value:function(e){for(var t in e)if(!e[t].reg.test(e[t].value))return Object(n["a"])({message:e[t].errorMsg,duration:3e3,forbidClick:!0}),!1;return!0}}]),e}(),c=new i},"522a":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"SetPword"},[o("div",{staticClass:"navtop"},[o("van-nav-bar",{attrs:{title:"修改密码","left-arrow":""},on:{"click-left":e.back}})],1),o("div",{staticClass:"register"},[o("van-field",{attrs:{type:e.isType?"text":"password",label:"新密码",placeholder:"请确认新密码","right-icon":e.isType?"eye-o":"closed-eye"},on:{"click-right-icon":e.toggleType},model:{value:e.pword.newpass,callback:function(t){e.$set(e.pword,"newpass",t)},expression:"pword.newpass"}}),o("van-field",{attrs:{type:e.isType?"text":"password",label:"确认密码",placeholder:"请确认新密码","right-icon":e.isType?"eye-o":"closed-eye"},on:{"click-right-icon":e.toggleType},model:{value:e.pword.ackpass,callback:function(t){e.$set(e.pword,"ackpass",t)},expression:"pword.ackpass"}}),o("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[o("van-button",{attrs:{size:"small",round:"",color:"linear-gradient(to right,#ff9000 0,#ff5000 100%)"},on:{click:e.getcode}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.pword.code,callback:function(t){e.$set(e.pword,"code",t)},expression:"pword.code"}}),o("p",{staticClass:"buttom",on:{click:e.ackModify}},[e._v("确认修改")])],1)])},s=[],r=(o("e3cdc"),o("2f14")),n={name:"SetPword",data:function(){return{infoData:{},isType:!1,codekey:"",pword:{newpass:"",ackPass:"",code:""}}},created:function(){var e=this;this.axios(this.baseUrl+"/verify_code").then((function(t){e.codekey=t.data.data.key,console.log(e.codekey)})),this.getInfo()},methods:{back:function(){this.$router.back()},toggleType:function(){this.isType=!this.isType},getInfo:function(){var e=this,t=this.$cookies.get("tokenString");if(!t)return console.log("浏览器token不存在"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:this.baseUrl+"/userinfo",headers:{"Authori-zation":"Bearer "+t}}).then((function(t){e.$toast.clear(),200==t.data.status?e.infoData=t.data.data:(e.$toast({message:t.data.msg,forbidClick:!0,duration:3e3}),e.$router.push("/login"))})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))},getcode:function(){var e=this;this.axios({method:"POST",url:this.baseUrl+"/register/verify",data:{code:"",key:this.codekey,phone:this.infoData.phone}}).then((function(e){console.log(e)})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))},ackModify:function(){var e=this;if(this.pword.newpass==this.pword.ackpass){var t={newpass:{value:this.pword.newpass,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码只支持字母数字且以字母开头"},ackpass:{value:this.pword.ackpass,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码只支持字母数字且以字母开头"}};if(r["a"].validForm(t)){var o=this.$cookies.get("tokenString");if(!o)return console.log("浏览器token不存在"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/register/reset",data:{account:this.infoData.phone,captcha:this.pword.code,code:"",password:this.pword.newpass},headers:{"Authori-zation":"Bearer "+o}}).then((function(t){e.$toast.clear(),200==t.data.status?e.$toast({message:t.data.msg,forbidClick:!0,duration:2e3}):(e.$toast({message:t.data.msg,forbidClick:!0,duration:3e3}),e.$router.push("/login"))})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))}}}}},i=n,c=o("2877"),l=Object(c["a"])(i,a,s,!1,null,null,null);t["default"]=l.exports},e3cdc:function(e,t,o){}}]);
//# sourceMappingURL=chunk-3be7c596.4e2f56b5.js.map