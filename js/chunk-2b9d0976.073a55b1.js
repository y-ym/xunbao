(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b9d0976"],{"0119":function(e,o,s){},"2f14":function(e,o,s){"use strict";function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function n(e,o){for(var s=0;s<o.length;s++){var t=o[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,o,s){return o&&n(e.prototype,o),s&&n(e,s),e}s.d(o,"a",(function(){return l}));var a=s("d399"),i=function(){function e(){t(this,e)}return r(e,[{key:"validForm",value:function(e){for(var o in e)if(!e[o].reg.test(e[o].value))return Object(a["a"])({message:e[o].errorMsg,duration:3e3,forbidClick:!0}),!1;return!0}}]),e}(),l=new i},a55b:function(e,o,s){"use strict";s.r(o);var t=function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{staticClass:"login"},[s("van-nav-bar",{attrs:{"left-text":"首页","left-arrow":"",border:!1},on:{"click-left":e.onClickLeft}}),e._m(0),s("div",{staticClass:"form"},[s("van-field",{attrs:{type:"tel",label:"手机",placeholder:"请输入手机号"},model:{value:e.userLoginInfo.phone,callback:function(o){e.$set(e.userLoginInfo,"phone",o)},expression:"userLoginInfo.phone"}}),s("van-field",{attrs:{type:e.isType?"text":"password",label:"密码",placeholder:"请输入密码","right-icon":e.isType?"eye-o":"closed-eye"},on:{"click-right-icon":e.toggleType},model:{value:e.userLoginInfo.password,callback:function(o){e.$set(e.userLoginInfo,"password",o)},expression:"userLoginInfo.password"}}),s("div",{staticClass:"sub"},[s("span",{staticClass:"reg",on:{click:e.isShow}},[e._v("注 册")]),s("span",{staticClass:"psw"},[e._v("忘记密码?")])]),s("div",{staticClass:"btn"},[s("van-button",{attrs:{round:"",block:"",color:"linear-gradient(to right,#ff9000 0,#ff5000 100%)"},on:{click:e.login}},[e._v("登 录")])],1)],1),s("van-popup",{staticClass:"popup",attrs:{closeable:"","close-icon":"close",position:"bottom",round:""},model:{value:e.show,callback:function(o){e.show=o},expression:"show"}},[s("div",{staticClass:"register"},[s("van-field",{attrs:{type:"tel",label:"手机",placeholder:"请输入手机号"},model:{value:e.userRegisterInfo.phone,callback:function(o){e.$set(e.userRegisterInfo,"phone",o)},expression:"userRegisterInfo.phone"}}),s("van-field",{attrs:{type:e.isType?"text":"password",label:"密码",placeholder:"请输入密码","right-icon":e.isType?"eye-o":"closed-eye"},on:{"click-right-icon":e.toggleType},model:{value:e.userRegisterInfo.password,callback:function(o){e.$set(e.userRegisterInfo,"password",o)},expression:"userRegisterInfo.password"}}),s("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[s("van-button",{attrs:{size:"small",round:"",color:"linear-gradient(to right,#ff9000 0,#ff5000 100%)"},on:{click:e.getcode}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.userRegisterInfo.code,callback:function(o){e.$set(e.userRegisterInfo,"code",o)},expression:"userRegisterInfo.code"}})],1),s("div",{staticClass:"btn"},[s("van-button",{attrs:{round:"",block:"",color:"linear-gradient(to right,#ff9000 0,#ff5000 100%)"},on:{click:e.register}},[e._v("注 册")])],1)])],1)},n=[function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{staticClass:"bg"},[s("p",{staticClass:"title"},[e._v("寻 宝")]),s("span",{staticClass:"sub"},[e._v("生活 . 在这得到满足")])])}],r=(s("0119"),s("2f14")),a={name:"login",data:function(){return{show:!1,userLoginInfo:{phone:"",password:""},userRegisterInfo:{phone:"",password:"",code:""},codekey:"",isType:!1}},methods:{onClickLeft:function(){console.log("返回首页"),this.$router.push("/")},isShow:function(){var e=this;this.show=!0,this.axios(this.baseUrl+"/verify_code").then((function(o){e.codekey=o.data.data.key,console.log(e.codekey)}))},getcode:function(){var e=this;this.axios({method:"POST",url:this.baseUrl+"/register/verify",data:{code:"",key:this.codekey,phone:this.userRegisterInfo.phone,type:"register"}}).then((function(e){console.log(e)})).catch((function(o){e.$toast.clear(),console.log("err ==> ",o)}))},register:function(){var e=this;console.log();var o={phone:{value:this.userRegisterInfo.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:this.userRegisterInfo.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码只支持字母数字且以字母开头"}};r["a"].validForm(o)&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/register",data:{account:this.userRegisterInfo.phone,password:this.userRegisterInfo.password,captcha:this.userRegisterInfo.code,spread:null}}).then((function(o){if(console.log("res ==> ",o),e.$toast.clear(),200==o.data.status)for(var s in e.isOpen=!1,e.userRegisterInfo)e.userRegisterInfo[s]="";else e.$toast({message:o.data.msg,forbidClick:!0,duration:3e3})})).catch((function(o){e.$toast.clear(),console.log("err ==> ",o)})))},login:function(){var e=this,o={phone:{value:this.userLoginInfo.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:this.userLoginInfo.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码只支持字母数字且以字母开头"}};r["a"].validForm(o)&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/login",data:{account:this.userLoginInfo.phone,code:"",password:this.userLoginInfo.password}}).then((function(o){console.log("res login ==> ",o),e.$toast.clear(),200===o.data.status?(e.$cookies.set("tokenString",o.data.data.token,"1d"),e.$router.back()):e.$toast({message:o.data.msg,forbidClick:!0,duration:3e3})})).catch((function(o){e.$toast.clear(),console.log("err ==> ",o)})))},toggleType:function(){this.isType=!this.isType}}},i=a,l=s("2877"),c=Object(l["a"])(i,t,n,!1,null,"796f735c",null);o["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2b9d0976.073a55b1.js.map